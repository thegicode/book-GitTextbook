# 7장 임시 처리

## 7.1 스태시

-   stash
    -   뜻: 숨기는 장소
    -   "안전한 보관"
-   깃은 완료지지 않은 작업(커밋되지 않은 변경 내용)이 남아 있을 때, 현재 작업을 임시로 저장할 수 있는 스태시 기능을 제공한다.
-   스태시는 '현재 워킹 디렉토리 내역을 별도의 스텍 영역에 잠시 보관하라'는 명령이다.

```
$ git stash --help
```

### 7.1.1 기존 작업 도중에 새로운 변경 요청

### 7.1.2 새 코드 작성 중 기존 코드를 수정

### 7.1.3 스태시의 임시 스택 영역에 작업 중인 코드 저장

-   명령어

    ```
    $ git stash
    ```

-   save 명령어를 추가하여 사용, 스태시 여러 개를 생성할 때 유용

    ```
    $ git stash save
    ```

-   스태시는 스택 구조로 여러 번 실행하여 저장할 수 있따. 스태시가 여러 개 있을 때 가각의 스태시를 구별할 수 있도록 메시지도 추가

    ```
    $ git stash save "WIP: 메시지 ~~~"
    ```

    -   WIP : Work In Progress

-   --keep-index 옵션 : 스테이지 영역의 파일들을 제외하고 스태시를 만든다.

-   --include-untracked 옵션 : 등록되지 않은 untracked 상태의 파일을 스태시로 생성

-   7-2_stash.mov

### 7.1.4 임시 저장 영역의 스택 목록

-   스태시의 저장 영역은 스택 구조
    -   스택은 FILO(First Input Last Out), 마지막 입력한 자료가 제일 먼저 출력되는 데이터 저장 방식
-   스태시에 저장된 스택은 list 옵션을 사용하여 확인
    ```
    $ git stash list
    stash@{0}: WIP on feature: fc8c21d new feature 1
    ```
    -   스태시 이름은 stash@{번호} 형태로 순차적으로 부여된다.
-   깃은 스태시된 객체들을 .git/refs/stash에 저장한다.
    ```
    $ cat .git/refs/stash
    ```
-   스태이시를 실행한 후 방금 전의 스태시와 현재 워킹 디렉터리 간 차이 확인
    ```
    $ git stash show
    ```
-   -p 옵션을 추가하면 상세 차이점을 알 수 있다.
    ```
    $ git stash show -p stash@{0}
    ```
-   7-3\_임시 저장 영역의 스택 목록.mov

### 7.1.5 임시 저장한 스태시 불러오기

-   스태시에 임시 저장한 내용을 읽어 다시 적용
    ```
    $ git stash pop
    ```
-   제일 마지막에 저장된 내용을 먼저 읽어온다.
-   워킹 디렉터리에 자동으로 병합한다. 자동 병합이 성공하면 읽어 온 내용을 스택에서 제거한다.
-   스태시는 스택에 저장할 때 워킹 디렉터리와 스테이지 영역의 파일까지 모두 보관한다. 스태시로 복원할 때는 워킹 디렉터리만 되돌린다. 스테이지에 등록된 스테시 상태까지 복구하길 원한다면 --index 옵션을 사용해야 한다.
    ```
    $ git stash apply --index
    ```
-   7-4\_임시 저장한 스태시 불러오기.mov

### 7.1.6 스태시 복원으로 충돌

-   복원하는 도중 충돌이 생기면 스테시는 스택에 저장된 내용을 자동으로 삭제하지 않습니다.
-   스태시 스택에 저장된 내용으로 새로운 브랜치를 동시에 생성할 수 있다.
    ```
    $ git stash branch 브랜치이름
    ```
-   정상으로 스태시 복원이 적용되면 저장된 스택은 자동으로 삭제
-   [Note] 스태시는 원격 저장소와 연결하여 작업할 때 충돌하는 상황에도 사용할 수 있다.
-   7-5\_스태시 복원으로 충돌.mov

### 7.1.7 스태시 복사

-   스태시를 사용한 저장과 복원은 서로 다른 브랜치에도 가능하다. 반드시 이전에 실행한 브랜치와 같은 브랜치에서 할 필요는 없다.
-   스태시 스택에 저장된 항목들은 어느 브랜치에서나 복원이 가능하다. apply 옵션은 스택에 저장된 항목을 불러와 현재 브랜치로 복원한다.
    ```
    $ git stash apply
    ```

## 7.2 워킹 디렉토리 청소

---

## 7.3 정리

```

```
